# 🏋️Health-Genie


### 📢 [배포 사이트 바로가기 - [ 바로가기 - 미정( 프론트 연동 중 ) ]]


## ✨ 프로젝트 소개

### [ 프로젝트 간단 소개 ]

- 저희 Health-Genie는 대학교 헬스장에서 열심히 운동을 하는 학생들을 위한 플랫폼입니다. 각 학생들이 트레이너와 회원이 됨으로써 1:1 PT를 매칭해줍니다. 또한 트레이너와 학생은 PT를 통해 기존에 수기로 작성을 했던 출석체크, 회원의 운동 피드백 등을 작성할 수 있고, 트레이너와 회원 사이에서 공유할 수 있도록 Health-Genie에서 제공함으로써 편리성을 주며, 회원이 PT에 대한 후기를 작성함으로써 다른 회원이 PT를 매칭하려할때 정보를 참조할 수 있도록 제공할 수 있습니다. 그 외에도 본인만의 루틴을 작성하거나 Health-Genie에서 제공하는 운동 루틴을 통해서 운동 수행 능력을 본인의 목표에 맞게 증진시킬 수 있습니다.
  
  <br/>

### [ 프로젝트를 처음 기획을 생각한 이유 ]

- 학교 헬스장에서 운동을 하다가 우연치 않게 보건복지부에서 진행하는 "청년 체력 증진 사업"을 보았습니다. 헬스장에서 대학원생과 대학생이 트레이너와 회원이 되어서 PT를 진행하는 모습을 보았는데, 트레이너님들은 피드백, 출석체크를 종이에 수기로 작성을 하며, 피드백은 서로가 공유되지 않았고, 회원 입장에서 트레이너들에 대한 아무런 정보가 없었고 특정 트레이너를 선택해서 PT를 진행하는 구조가 아님을 알았습니다. 이러한 불편한 점들을 내가 개선해서 편리하게 이용할 수 있는 서비스를 만들면 어떨까? 라는 생각에서 기획하게 되었습니다.

  <br/>

### [ 프로젝트를 완성할 수 있었던 이유 ]

- 프로젝트를 진행하면서 가장 크게 느낀점은 '협업'과 서로의 '니즈'였습니다. 나의 니즈가 다른 팀원들의 니즈가 아님을 배웠습니다. 따라서 서로의 니즈를 충족하게끔 노력했고, 협업을 위해 주기적인 회의를 했고, 상대방이 특정 기능에 대해서 이해하기 쉽게끔 글 / 그림을 '노션' 을 통해서 설명하는 등 더 나은 커뮤니케이션을 하기 위해서 노력했습니다

  <br/>

## 👨‍기술 스택

<h3 align="center">어플리케이션</h3>

<p align="center">

<img src="https://img.shields.io/badge/Java 17-008FC7?style=for-the-badge&logo=Java&logoColor=white"/>
<img src="https://img.shields.io/badge/spring 3-%236DB33F.svg?style=for-the-badge&logo=spring&logoColor=white"/>
<img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=Spring Security&logoColor=white"/>
<img src="https://img.shields.io/badge/Spring Data JPA-6DB33F?style=for-the-badge&logo=JPA&logoColor=white"/>

<img src="https://img.shields.io/badge/-QueryDSL-blue?style=for-the-badge"/>
<img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white"/>
<img src="https://img.shields.io/badge/Junit-25A162?style=for-the-badge&logo=Junit5&logoColor=white"/>
<img src="https://img.shields.io/badge/JSON Web Tokens-000000?style=for-the-badge&logo=JSON Web Tokens&logoColor=white"/>

</p>


<h3 align="center">DB</h3>

<p align="center">  
<img src="https://img.shields.io/badge/mysql-%2300f.svg?style=for-the-badge&logo=mysql&logoColor=white"/>
<img src="https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white"/>

</p>

<h3 align="center">인프라</h3>

<p align="center">   

<img src="https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=for-the-badge&logo=Amazon EC2&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=for-the-badge&logo=Amazon RDS&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=for-the-badge&logo=GitHub Actions&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon Route53-8C4FFF?style=for-the-badge&logo=Amazon Route 53&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon CloudWatch-2088FF?style=for-the-badge&logo=Amazon CloudWatch&logoColor=white"/>

</p>

<h3 align="center">문서 / 협업</h3>

<p align="center">   

<img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white"/>
<img src="https://img.shields.io/badge/Git-F05032.svg?style=for-the-badge&logo=Git&logoColor=white"/>
<img src="https://img.shields.io/badge/GitHub-181717.svg?style=for-the-badge&logo=GitHub&logoColor=white"/>
<img src="https://img.shields.io/badge/Postman-FF6C37.svg?style=for-the-badge&logo=Postman&logoColor=white"/>

</p>

<br>



## 🎨 ERD Diagram
![ERD](images/health_genie_erd.png)
[1차 ERD 설계](https://techj9972.tistory.com/205)

<br>

## 🔎 Project Architecture
![Architecture](images/architecture.png)

<br>

## 📕 Health-Genie의 여정 소개
![USER_FLOW](images/health_genie_user_flow.png)

<br>

## 🧑‍💻 API 문서 보기


HEALTH-GENIE Postman API!!    [ 문서 보기 ](https://documenter.getpostman.com/view/14933639/2s9YsNdVs4)


## 🐧 TEST CODE
- 테스트 코드는 단순히 애플리케이션의 기능이 제대로 동작하는 것만 검증한다고 생각하지 않고, 제 3자가 봤을 때 해당 프로젝트에 어떤 기능들이 있으며 그에 따른 응답을 확인할 수 있는 수단이라고 생각합니다.

### UNIT TEST
- 단위 테스트는 비즈니스 로직의 가장 작은 단위인 각 메서드를 기반으로 테스트를 진행했습니다.
- 기존의 단위 테스트는 스프링을 사용하지 않고 빠른 속도와 독립적인 실행을 보장하는 것이 일반적이지만, 작업 일정과 개발 진행 상황에 따라 통합 테스트 작성을 하지 않고 단위 테스트에서 `@SpringBootTest` 애노테이션을 사용 함으로써 통합/단위 테스트를 진행했습니다.
- 각 메서드의 정상적인 기능 동작과 실행 속도 또한 통합 테스트에 비해 빠르며, 함께 필요한 의존성의 올바른 관계를 확인할 수 있습니다.
- 또한 각각의 테스트 클래스마다 중복되는 작업들은 테스트 유틸 클래스를 만들고 메서드 네이밍을 명확히 하여 사용 및 유지 보수하고 있습니다.
![TEST_CODE](images/test_code_ex.png)


<br>

## 🏛️ CI/CD 아키텍처 (배포 자동화)

### 1. 현재 배포의 구조 / 선택한 이유 (Github Action 배포 자동화)

### CI Flow
> Github 'production' Branch Push  → Github Actions → Project Build → Docker Image Build → <br>
Docker Hub Image Upload → AWS S3 Project File Upload

### CD Flow
> AWS CodeDeploy → Docker Container Stop -> Docker Image Pull -> Docker Run

![img.png](images/health_genie_githubaction.png)

1. 무료입니다! 
2. 코드 저장소와 직접 연동되기 때문에 워크플로우를 쉽게 작성하고 관리가 쉽습니다.
3. YAML 기반의 워크플로우 파일을 작성하여 필요한 작업을 정의할 수 있으며, 버전 관리도 손쉽게 할 수 있습니다.
4. 무엇보다 구글에서 찾아볼 수 있는 리소스가 많아서 이기도 합니다!

<br>

## 🥕프로젝트 백엔드 의사결정 및 이슈

### 최적화
[ Field type - entity 정수 타입 고민 ](https://techj9972.tistory.com/250) <br>
[ method 선택 - ParseInt() vs valueOf() ](https://techj9972.tistory.com/246) <br>
[ Annotation - 컬렉션 타입 형태의 데이터 저장 고민 ](https://techj9972.tistory.com/243) <br>
[ 무한스크롤 도입 - 페이지 조회 성능 향상을 위한 고민](https://techj9972.tistory.com/276) <br>

### 프로젝트 진행 이슈
[ 이메일 인증 전략 고민 [1] - Redis 사용 ](https://techj9972.tistory.com/238) <br>
[ 이메일 인증 전략 고민 [2] - Api 사용 ](https://techj9972.tistory.com/253) <br>

### 백엔드 이슈
[ 변경 감지를 통한 회원 정보 수정이 되지 않던 문제 ](https://kyeongryeol.notion.site/User-update-8eba600469ea49c8a4e01bcc7e4a4e6a?pvs=4) <br>
[ 커스텀 예외를 ExceptionHandler로 처리했음에도 500 Error가 터졌던 문제 ](https://kyeongryeol.notion.site/GlobalExceptionHandler-500-Server-Error-29821be0b9954473bc7dd3400f9352c9?pvs=4) <br>

### 인프라

### 지속적인 리팩토링
[ 모니터링 - cloud watch ](https://techj9972.tistory.com/265)


<br>


## 🥲 시행착오들
[ 🐛MySQL - Failed to add the foreign key constraint ](https://techj9972.tistory.com/207) <br>
[ 🪱Mail - Authenticatioin Fail ](https://techj9972.tistory.com/208) <br>
[ 🐝UserDetail - InternalAuthenticationServiceException ](https://techj9972.tistory.com/209) <br> 
[ 🫎Symbol - error : cannot find symbol log.info ](https://techj9972.tistory.com/210) <br>
[ 🦄Json - Infinite recursion ( stackOverFlow ) ](https://techj9972.tistory.com/239) <br> 
[ 🐴Enum - No enum constant enum name.value ](https://techj9972.tistory.com/240) <br>
[ 🦅PortNumber - Port Number was already in use ](https://techj9972.tistory.com/241) <br>
[ 🦆Data - Data truncation: Datta too long for column ](https://techj9972.tistory.com/242) <br>
[ 🪿IntelliJ - build.gradle 오류 ](https://techj9972.tistory.com/244) <br>
[ 🐶Dirty Checking - 변경감지 적용시 유의점 ](https://techj9972.tistory.com/245) <br>
[ 🐱Http - HTTP method names must be token ](https://techj9972.tistory.com/247) <br>
[ 🐭@Value - @Value cannot find method 'value' ](https://techj9972.tistory.com/248) <br>
[ 🐹Postman - Api 문서 만들기 ](https://techj9972.tistory.com/251) <br>
[ 🦊Pipe - broken pipe error ](https://techj9972.tistory.com/252) <br>
[ 🐻API - univCert Api 를 사용해서 이메일 인증 ](https://techj9972.tistory.com/253) <br>
[ 🐼Json - JSON parse error ](https://techj9972.tistory.com/256) <br>
[ 🐔Deserialize - cannot deserialize from Object value ](https://techj9972.tistory.com/258) <br>
[ 🐧Branch - git push error ](https://techj9972.tistory.com/260) <br>
[ 🐦CodeDeploy - github action 배포 오류 ](https://techj9972.tistory.com/261) <br>
[ 🐤CICD - action 배포 성공 후 s3 zip 파일 안열림 오류 ](https://techj9972.tistory.com/262) <br>
[ 🐣CICD - github actioin CD ssh 연결 오류 ](https://techj9972.tistory.com/263) <br>
[ 🐥CICD - 프로젝트 빌드 오류 ](https://techj9972.tistory.com/264) <br>

<br>

## 🥃 Wireframe

[📝 Figma 바로가기 ](https://www.figma.com/file/Vo2fqi0lJnHjly8zuGbVuX/Health-Genie-기획-%2B-디자인?type=design&node-id=103-2&mode=design&t=l59LYYKYOFqaHSQJ-0)

